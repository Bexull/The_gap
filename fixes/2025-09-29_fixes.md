# Исправления от 2025-09-29

## Централизованная система учета времени задач

**Проблема:** Таймеры обновлялись каждые 15 секунд, но в некоторых моментах не правильно обновлялись. Также создавались в нескольких местах, что усложняло управление.

**Решение:** Создана централизованная система учета времени задач.

**Изменения:**
- ✅ Добавлена структура `task_time_tracker` в `src/config/settings.py` для централизованного учета времени задач
- ✅ Переписан `task_timer` на работу через централизованный трекер (фоновые тики, UI-обновления, единая очистка состояний)
- ✅ Обновлены обработчики `task_assignment`, `task_restoration`, `special_task_completion` для использования нового трекера
- ✅ При заморозке и восстановлении задания сохраняем `allocated_seconds`, `elapsed_seconds`, `remaining_seconds`
- ✅ Пересмотрен расчет потраченного времени в `task_execution` — используем накопленные значения из трекера
- ✅ Добавлено автоматическое обновление `freeze_time` при любом завершении/заморозке задания, в том числе при возврате на доработку
- ✅ Таймер теперь возобновляется с корректным остатком после возврата задания

**Результат:** Централизованная система управления временем задач с единой точкой контроля и корректным восстановлением времени.
